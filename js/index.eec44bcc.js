(function(t){function e(e){for(var n,a,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,o=1;o<i.length;o++){var l=i[o];0!==r[l]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},r={index:0},s=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dst-farm-planner/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"033f":function(t,e,i){"use strict";i("b851")},"034f":function(t,e,i){"use strict";i("85ec")},"06a3":function(t,e,i){},"0d37":function(t,e,i){},"12e3":function(t,e,i){"use strict";i("aaa5")},"1a92":function(t,e,i){},"1dfb":function(t,e,i){},"1fb3":function(t,e,i){},"25e8":function(t,e,i){},"2df6":function(t,e,i){"use strict";i("4467")},"3c81":function(t,e,i){t.exports=i.p+"img/dont-starve-together-logo.d23dc9f2.png"},"3d22":function(t,e,i){"use strict";i("435c")},"435c":function(t,e,i){},4467:function(t,e,i){},"4a1f":function(t,e,i){"use strict";i("1fb3")},5238:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"navigation-bar-container"}},[i("NavigationBar")],1),t.fieldState?t._e():i("div",{attrs:{id:"startup-container"}},[i("Startup",{attrs:{season:t.currentSeason},on:{finishSetup:t.setupFarm}})],1),t.fieldState?i("div",{attrs:{id:"field-canvas-container"}},[i("FieldCanvas",{ref:"field",attrs:{currentAction:t.currentAction,currentSeason:t.currentSeason,actionDetails:t.currentActionDetail,fieldState:t.fieldState},on:{inspect:t.inspect,action:t.actionDone}})],1):t._e(),t.fieldState?i("div",{attrs:{id:"tool-bar-container"}},[i("ToolBar",{attrs:{undoable:t.undoable,redoable:t.redoable,currentAction:t.currentAction},on:{selectAction:t.setAction,undo:t.undo,redo:t.redo}})],1):t._e(),i("div",{attrs:{id:"status-bar-container"}},[i("StatusBar",{attrs:{currentAction:t.currentAction,currentSeason:t.currentSeason,actionDetails:t.currentActionDetail,fieldState:t.fieldState,farmDetail:t.farmDetail,tileDetail:t.tileDetail,plotDetail:t.plotDetail},on:{selectSeason:t.setSeason,setActionDetails:t.setActionDetails,loadSave:t.loadSave}})],1)])},s=[],a=(i("bf19"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"navigation-bar"}},[n("h1",{attrs:{id:"navigation-bar-header"}},[t._v(" Don't Starve Together Farm Planner ")]),n("div",{staticClass:"navigation-bar-divider"}),n("div",{attrs:{id:"navigation-bar-github"}},[n("a",{attrs:{href:"https://www.klei.com/games/dont-starve-together"}},[n("img",{attrs:{src:i("3c81")}})])])])}],l={name:"NavigationBar",data:function(){return{}}},c=l,u=(i("d845"),i("2877")),d=Object(u["a"])(c,a,o,!1,null,"04fc003b",null),p=d.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.fieldCanvasStyle,attrs:{id:"field-canvas"}},[i("div",{style:t.tileGridStyle,attrs:{id:"tiles-container"}},t._l(t.farmData.tileList,(function(e,n){return i("div",{key:n},[i("Tile",{ref:"tiles",refInFor:!0,attrs:{tileIndex:n,tileData:e,currentAction:t.currentAction,currentSeason:t.currentSeason,actionDetails:t.actionDetails},on:{changeCrop:t.updateAdjacentTiles,inspect:t.inspect,action:t.actionDone}})],1)})),0)])},f=[],h=i("b85c"),g=(i("99af"),i("498a"),i("38cf"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tile",class:{plotted:t.plotted},on:{click:t.clicked}},[i("div",{staticClass:"plot-container",class:t.glowOnActionHover,style:t.plotGridStyle},t._l(t.tileData.plotList,(function(e,n){return i("div",{key:n,style:t.showWhenPlotted},[i("Plot",{ref:"plots",refInFor:!0,attrs:{plotIndex:n,plotData:e,currentAction:t.currentAction,currentSeason:t.currentSeason,actionDetails:t.actionDetails,nutrients:t.nutrients},on:{plantCrop:t.cropPlanted,destroyCrop:t.cropDestroyed,inspect:t.inspect,action:t.actionDone}})],1)})),0)])}),v=[],S=(i("2af1"),i("caad"),i("2532"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plot",class:t.glowOnActionHover,style:t.border,on:{click:t.handleClick}},[t.crop?i("img",{class:{"giant-glow":t.giant},style:t.customSize(t.crop),attrs:{src:t.imgSrc}}):t._e()])}),y=[],b={carrot:{crop:"carrot",name:"Carrot",src:{normal:"crop_normal/carrot.png",giant:"crop_giant/carrot.png",seeds:"crop_seeds/Oblong_Seeds.png",plant:"crop_plant/Carrot_Plant.png"},dimensions:{plant:{x:264,y:304,multiplier:1.2},giant:{x:350,y:419,multiplier:.9}},nutrients:{growthFormula:-4,compost:2,manure:2},seasons:["autumn","winter","spring"],drink:.75},corn:{crop:"corn",name:"Corn",src:{normal:"crop_normal/corn.png",giant:"crop_giant/corn.png",seeds:"crop_seeds/Clustered_Seeds.png",plant:"crop_plant/Corn_Stalk.png"},dimensions:{plant:{x:265,y:367,multiplier:1.1},giant:{x:271,y:344,multiplier:1}},nutrients:{growthFormula:2,compost:-4,manure:2},seasons:["autumn","spring","summer"],drink:.75},potato:{crop:"potato",name:"Potato",src:{normal:"crop_normal/potato.png",giant:"crop_giant/potato.png",seeds:"crop_seeds/Fluffy_Seeds.png",plant:"crop_plant/Potato_Plant.png"},dimensions:{plant:{x:334,y:475,multiplier:.85},giant:{x:257,y:341,multiplier:.85}},nutrients:{growthFormula:2,compost:2,manure:-4},seasons:["autumn","winter","spring"],drink:.75},tomaRoot:{crop:"tomaRoot",name:"Toma Root",src:{normal:"crop_normal/toma-root.png",giant:"crop_giant/toma-root.png",seeds:"crop_seeds/Spiky_Seeds.png",plant:"crop_plant/Toma_Root_Plant.png"},dimensions:{plant:{x:350,y:345,multiplier:1.1},giant:{x:319,y:284,multiplier:1}},nutrients:{growthFormula:-2,compost:-2,manure:4},seasons:["autumn","spring","summer"],drink:3.5},asparagus:{crop:"asparagus",name:"Asparagus",src:{normal:"crop_normal/asparagus.png",giant:"crop_giant/asparagus.png",seeds:"crop_seeds/Tubular_Seeds.png",plant:"crop_plant/Asparagus_Fern.png"},dimensions:{plant:{x:308,y:399,multiplier:1.1},giant:{x:203,y:458,multiplier:.8}},nutrients:{growthFormula:2,compost:-4,manure:2},seasons:["winter","spring"],drink:.75},eggplant:{crop:"eggplant",name:"Eggplant",src:{normal:"crop_normal/eggplant.png",giant:"crop_giant/eggplant.png",seeds:"crop_seeds/Swirly_Seeds.png",plant:"crop_plant/Eggplant_Stalk.png"},dimensions:{plant:{x:274,y:453,multiplier:1},giant:{x:241,y:346,multiplier:.9}},nutrients:{growthFormula:2,compost:2,manure:-4},seasons:["autumn","spring"],drink:2},pumpkin:{crop:"pumpkin",name:"Pumpkin",src:{normal:"crop_normal/pumpkin.png",giant:"crop_giant/pumpkin.png",seeds:"crop_seeds/Sharp_Seeds.png",plant:"crop_plant/Pumpkin_Plant.png"},dimensions:{plant:{x:237,y:428,multiplier:1},giant:{x:330,y:353,multiplier:.95}},nutrients:{growthFormula:-4,compost:2,manure:2},seasons:["autumn","winter"],drink:2},watermelon:{crop:"watermelon",name:"Watermelon",src:{normal:"crop_normal/watermelon.png",giant:"crop_giant/watermelon.png",seeds:"crop_seeds/Square_Seeds.png",plant:"crop_plant/Watermelon_Plant.png"},dimensions:{plant:{x:350,y:334,multiplier:1.1},giant:{x:287,y:340,multiplier:1}},nutrients:{growthFormula:4,compost:-2,manure:-2},seasons:["spring","summer"],drink:3.5},dragonFruit:{crop:"dragonFruit",name:"Dragon Fruit",src:{normal:"crop_normal/dragon-fruit.png",giant:"crop_giant/dragon-fruit.png",seeds:"crop_seeds/Bulbous_Seeds.png",plant:"crop_plant/Dragon_Fruit_Vine.png"},dimensions:{plant:{x:308,y:485,multiplier:1},giant:{x:305,y:455,multiplier:.85}},nutrients:{growthFormula:4,compost:4,manure:-8},seasons:["spring","summer"],drink:2},durian:{crop:"durian",name:"Durian",src:{normal:"crop_normal/durian.png",giant:"crop_giant/durian.png",seeds:"crop_seeds/Brittle_Seed_Pods.png",plant:"crop_plant/Durian_Vine.png"},dimensions:{plant:{x:247,y:412,multiplier:1.1},giant:{x:297,y:432,multiplier:.8}},nutrients:{growthFormula:4,compost:-8,manure:4},seasons:["spring"],drink:.75},garlic:{crop:"garlic",name:"Garlic",src:{normal:"crop_normal/garlic.png",giant:"crop_giant/garlic.png",seeds:"crop_seeds/Seed_Pods.png",plant:"crop_plant/Garlic_Plant.png"},dimensions:{plant:{x:279,y:412,multiplier:1.2},giant:{x:264,y:453,multiplier:.9}},nutrients:{growthFormula:4,compost:-8,manure:4},seasons:["autumn","winter","spring","summer"],drink:.75},onion:{crop:"onion",name:"Onion",src:{normal:"crop_normal/onion.png",giant:"crop_giant/onion.png",seeds:"crop_seeds/Pointy_Seeds.png",plant:"crop_plant/Onion_Plant.png"},dimensions:{plant:{x:221,y:326,multiplier:1},giant:{x:226,y:387,multiplier:.9}},nutrients:{growthFormula:-8,compost:4,manure:4},seasons:["autumn","spring","summer"],drink:2},pepper:{crop:"pepper",name:"Pepper",src:{normal:"crop_normal/pepper.png",giant:"crop_giant/pepper.png",seeds:"crop_seeds/Lumpy_Seeds.png",plant:"crop_plant/Pepper_Plant.png"},dimensions:{plant:{x:277,y:336,multiplier:1.1},giant:{x:258,y:357,multiplier:.9}},nutrients:{growthFormula:4,compost:4,manure:-8},seasons:["autumn","summer"],drink:.75},pomegranate:{crop:"pomegranate",name:"Pomegranate",src:{normal:"crop_normal/pomegranate.png",giant:"crop_giant/pomegranate.png",seeds:"crop_seeds/Windblown_Seeds.png",plant:"crop_plant/Pomegranate_Branch.png"},dimensions:{plant:{x:345,y:450,multiplier:1},giant:{x:240,y:307,multiplier:1.1}},nutrients:{growthFormula:-8,compost:4,manure:4},seasons:["spring","summer"],drink:2}},_={plotSizePx:50,plotRowsPerTile:3,plotColsPerTile:3,defaultTileRows:5,defaultTileCols:5,defaultSeason:"autumn",minFarmSize:1,maxFarmSize:10,cropBasis:{plant:"asparagus",giant:"garlic"},minimumFamily:3,maxNeighborDistance:3.1,plantGrowthStages:5,cropYieldTiers:[{minStress:0,maxStress:1,cropYield:2.75,seedYield:2.25,remark:"giant"},{minStress:2,maxStress:6,cropYield:1,seedYield:2,remark:"good"},{minStress:7,maxStress:11,cropYield:1,seedYield:1,remark:"bad"},{minStress:12,maxStress:1/0,cropYield:1,seedYield:0,remark:"horrible"}],growthSpeed:{inSeason:1,offSeason:.5}},x=i("53ca"),D=(i("466d"),i("ac1f"),i("1276"),{autumn:{season:"autumn",symbol:"seasons/autumn_symbol.png",turf:"canvas/Deciduous_Turf_Texture.png"},winter:{season:"winter",symbol:"seasons/winter_symbol.png",turf:"canvas/Forest_Turf_Texture.png"},spring:{season:"spring",symbol:"seasons/spring_symbol.png",turf:"canvas/Slimey_Turf_Texture.png"},summer:{season:"summer",symbol:"seasons/summer_symbol.png",turf:"canvas/Savanna_Turf_Texture.png"}});function C(t){var e=t.width,i=t.height,n=t.season,r=t.tiles;return O(e)&&T(e,_.minFarmSize,_.maxFarmSize)&&O(i)&&T(i,_.minFarmSize,_.maxFarmSize)&&F(n)&&!!D[n]&&w(r,e,i)}function w(t,e,i){if("object"!==Object(x["a"])(t))return!1;for(var n in t){if(!n.match(/^\d+,\d+$/))return!1;var r=n.split(","),s=+r[0],a=+r[1],o=2===r.length&&O(s)&&T(s,0,e-1)&&O(a)&&T(a,0,i-1)&&k(t[n]);if(!o)return!1}return!0}function k(t){if("object"!==Object(x["a"])(t))return!1;for(var e in t){if(!e.match(/^\d+,\d+$/))return!1;var i=e.split(","),n=+i[0],r=+i[1],s=2===i.length&&O(n)&&T(n,0,_.plotColsPerTile-1)&&O(r)&&T(r,0,_.plotRowsPerTile-1)&&!!b[t[e]];if(!s)return!1}return!0}function O(t){return"number"===typeof t&&Math.floor(t)===t}function F(t){return"string"===typeof t}function T(t,e,i){return e<=t&&t<=i}function P(t){return b[t].nutrients}function A(t){return b[t].seasons}function N(t,e){return A(t).includes(e)}function j(t,e){var i,n=0,r=0,s=Object(h["a"])(_.cropYieldTiers);try{for(s.s();!(i=s.n()).done;){var a=i.value;if(T(e,a.minStress,a.maxStress)){n=a.cropYield,r=a.seedYield;break}}}catch(o){s.e(o)}finally{s.f()}return{crop:n,seed:r}}function E(t){return"./static/"+t}var $={name:"Plot",props:["plotIndex","plotData","currentAction","currentSeason","actionDetails","nutrients"],data:function(){var t={};for(var e in b)t[e]=0;return{border:{borderTopWidth:this.plotData.x>0?"1px":"0px",borderBottomWidth:this.plotData.x<2?"1px":"0px",borderLeftWidth:this.plotData.y>0?"1px":"0px",borderRightWidth:this.plotData.y<2?"1px":"0px"},crop:null,family:t}},methods:{handleClick:function(t){var e;switch(this.currentAction){case"plant":e=this.plant(t);break;case"destroy":e=this.destroy(t);break;case"inspect":return this.inspect(t)}e&&e.revert&&this.$emit("action",e)},plant:function(){if(this.actionDetails&&null===this.crop){var t=this.plantCrop(this.actionDetails);return t}return{type:"plant"}},plantCrop:function(t){var e=this;this.plotData.plant(t),this.crop=t,this.plotData.family=this.family[this.crop],this.$emit("plantCrop",this.crop,this.plotIndex);var i={type:"plantCrop",revert:function(){return e.destroy()}};return i},destroy:function(){var t=this;if(null!==this.crop){var e=this.crop;return this.plotData.destroy(),this.crop=null,this.plotData.family=null,this.$emit("destroyCrop",this.plotIndex),{type:"destroy",revert:function(){return t.plantCrop(e)}}}return{type:"destroy"}},inspect:function(t){null!==this.crop&&(this.$emit("inspect",this.plotData.inspectReport(this.nutrients,this.currentSeason)),t&&t.stopPropagation())},customSize:function(t){var e=this.giant?"giant":"plant",i=_.cropBasis[e],n=b[i].dimensions[e].x,r=b[t].dimensions[e],s=r.x*r.multiplier,a=_.plotSizePx,o=s*a/n;return{width:"".concat(o,"px")}},neighborUpdated:function(t,e){t&&this.family[t]--,e&&this.family[e]++,this.crop&&(this.plotData.family=this.family[this.crop])}},computed:{imgSrc:function(){if(!this.crop)return"";var t=this.giant?"giant":"plant";return E(b[this.crop].src[t])},giant:function(){if(!this.crop)return!1;var t=!this.inSeason,e=!this.hasFamily,i=!this.nutrientBalance;return!(t||e||i)},nutrientBalance:function(){return this.plotData.meetsNutrientRequirements(this.nutrients)},hasFamily:function(){return this.plotData.hasFamily()},inSeason:function(){return this.plotData.inSeason(this.currentSeason)},plantable:function(){return"plant"===this.currentAction&&null===this.crop&&null!==this.actionDetails},destroyable:function(){return"destroy"===this.currentAction&&null!==this.crop},inspectable:function(){return"inspect"===this.currentAction&&null!==this.crop},glowOnActionHover:function(){return{"plot-glow-white":this.inspectable,"plot-glow-green":this.plantable,"plot-glow-red":this.destroyable}}},watch:{currentSeason:function(){"inspect"===this.currentAction&&this.inspect()}}},I=$,R=(i("c162"),Object(u["a"])(I,S,y,!1,null,"5c55cb78",null)),L=R.exports,Y=_.plotSizePx,z=_.plotColsPerTile,B=_.plotRowsPerTile,U=_.maxNeighborDistance,W={name:"Tile",components:{Plot:L},props:["tileIndex","tileData","currentAction","currentSeason","actionDetails"],data:function(){return{plotCropList:[]}},computed:{plotGridStyle:function(){var t="".concat(Y,"px ").repeat(B).trim(),e="".concat(Y,"px ").repeat(z).trim();return{display:"grid",gridTemplateRows:t,gridTemplateColumns:e}},showWhenPlotted:function(){return{visibility:this.plotted?"visible":"hidden"}},nutrients:function(){return this.tileData.nutrients},plowable:function(){return"plot"===this.currentAction&&!this.plotted},flattenable:function(){return"flatten"===this.currentAction&&this.plotted},inspectable:function(){return"inspect"===this.currentAction&&this.plotted},plotted:function(){return this.tileData.plotted},glowOnActionHover:function(){return{"glow-red":this.flattenable,"glow-green":this.plowable,"glow-white":this.inspectable}}},methods:{clicked:function(){var t;this.plowable?t=this.plow():this.flattenable?t=this.destroy():this.inspectable&&this.inspect(null),t&&t.revert&&this.actionDone(t)},actionDone:function(t){this.$emit("action",t)},plow:function(){var t=this;return this.tileData.plow(),this.plotCropList=[],{type:"plowTile",revert:function(){return t.destroy()}}},destroy:function(){var t=this;this.tileData.destroy();var e,i=[],n=Object(h["a"])(this.$refs.plots);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.crop){var s=r.destroy();s&&s.revert&&i.push(s)}}}catch(a){n.e(a)}finally{n.f()}return{type:"destroyTile",revert:function(){var e=t.plow();return i.forEach((function(t){return t.revert()})),e}}},loadTileState:function(t){var e,i=Object(h["a"])(this.$refs.plots);try{for(i.s();!(e=i.n()).done;){var n=e.value,r="".concat(n.plotData.x,",").concat(n.plotData.y);t[r]&&n.plantCrop(t[r])}}catch(s){i.e(s)}finally{i.f()}},inspect:function(t){this.$emit("inspect",{plotDetail:t,tileDetail:this.tileData.inspectReport(this.currentSeason)})},cropPlanted:function(t,e){this.addCropNutrients(t,1),this.plotCropList[e]=t,this.cropUpdated(e,null,t)},cropDestroyed:function(t){var e=this.plotCropList[t];this.addCropNutrients(e,-1),this.plotCropList[t]=null,this.cropUpdated(t,e,null)},addCropNutrients:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=Math.sign(e),n=b[t].nutrients,r=b[t].seasons.includes(this.currentSeason)?_.growthSpeed.inSeason:_.growthSpeed.offSeason;for(var s in n)this.tileData[s]+=n[s]*r*i},cropUpdated:function(t,e,i){var n,r=Object(h["a"])(this.$refs.plots);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.plotIndex!==t&&s.neighborUpdated(e,i)}}catch(a){r.e(a)}finally{r.f()}this.emitChangeCropEvent(t,e,i)},emitChangeCropEvent:function(t,e,i){var n=this.plotIndexToXY(t),r={coordinates:n,tile:this.tileIndex,tileData:this.tileData,from:e,to:i};this.$emit("changeCrop",r)},updateCropNeighbors:function(t,e,i){var n,r=Object(h["a"])(this.$refs.plots);try{for(r.s();!(n=r.n()).done;){var s=n.value,a=this.plotIndexToXY(s.plotIndex),o=this.getDistance(t,a);o<U&&s.neighborUpdated(e,i)}}catch(l){r.e(l)}finally{r.f()}},getDistance:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},plotIndexToInternalXY:function(t){return{x:t%z,y:Math.floor(t/z)}},plotIndexToXY:function(t){var e=this.plotIndexToInternalXY(t),i=e.x,n=e.y;return{x:this.tileData.x*z+i,y:this.tileData.y*B+n}}},watch:{currentSeason:function(){this.tileData.growthFormula=0,this.tileData.compost=0,this.tileData.manure=0;var t,e=Object(h["a"])(this.plotCropList);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&this.addCropNutrients(i,1)}}catch(n){e.e(n)}finally{e.f()}}}},H=W,q=(i("033f"),Object(u["a"])(H,g,v,!1,null,"a012dec8",null)),J=q.exports,M=i("d4ec"),G=i("bee2"),K=i("ade3"),X=(i("13d5"),function(){function t(e,i){Object(M["a"])(this,t),Object(K["a"])(this,"family",null),this.x=e,this.y=i,this.crop=null}return Object(G["a"])(t,[{key:"plant",value:function(t){this.crop=t}},{key:"destroy",value:function(){this.crop=null}},{key:"inSeason",value:function(t){return!!this.crop&&N(this.crop,t)}},{key:"hasFamily",value:function(){return(this.family||0)>=_.minimumFamily}},{key:"nutrientRequirements",get:function(){return this.crop?P(this.crop):null}},{key:"meetsNutrientRequirements",value:function(t){return this.crop?t.growthFormula>=0&&t.compost>=0&&t.manure>=0:null}},{key:"getStressPoints",value:function(t,e){var i=_.plantGrowthStages-1;return(this.hasFamily()?0:i)+(this.inSeason(e)?0:i)+(this.meetsNutrientRequirements(t)?0:i)}},{key:"getOptimalYield",value:function(t,e){var i=this.getStressPoints(t,e);return j(this.crop,i)}},{key:"inspectReport",value:function(t,e){return{x:this.x,y:this.y,crop:this.crop,season:e,inSeason:this.inSeason(e),family:this.family,hasFamily:this.hasFamily(),nutrientRequirements:this.nutrientRequirements,meetsNutrientRequirements:this.meetsNutrientRequirements(t),stressPts:this.getStressPoints(t,e),yield:this.getOptimalYield(t,e)}}},{key:"debugLog",value:function(t,e){console.log(this.inspectReport(t,e))}}]),t}()),V=function(){function t(e,i){Object(M["a"])(this,t),Object(K["a"])(this,"plots",[]),Object(K["a"])(this,"plotted",!1),Object(K["a"])(this,"growthFormula",0),Object(K["a"])(this,"compost",0),Object(K["a"])(this,"manure",0),this.x=e,this.y=i;for(var n=0;n<_.plotRowsPerTile;n++){this.plots[n]=[];for(var r=0;r<_.plotColsPerTile;r++)this.plots[n][r]=new X(r,n)}}return Object(G["a"])(t,[{key:"getPlot",value:function(t,e){return this.plots[t][e]}},{key:"plow",value:function(){this.plotted=!0,this.growthFormula=0,this.compost=0,this.manure=0}},{key:"destroy",value:function(){this.plotted=!1}},{key:"plotList",get:function(){return this.plots.reduce((function(t,e){return t.concat(e)}))}},{key:"toJSON",value:function(){for(var t={},e=0;e<_.plotRowsPerTile;e++)for(var i=0;i<_.plotColsPerTile;i++)this.plots[e][i].crop&&(t["".concat(i,",").concat(e)]=this.plots[e][i].crop);return t}},{key:"nutrients",get:function(){return{growthFormula:this.growthFormula,compost:this.compost,manure:this.manure}}},{key:"seedUsed",get:function(){if(!this.plotted)return{};for(var t={},e=0;e<_.plotRowsPerTile;e++)for(var i=0;i<_.plotColsPerTile;i++){var n=this.plots[e][i].crop;n&&(t[n]=(t[n]||0)+1)}return t}},{key:"getOptimalYield",value:function(t){for(var e={},i=this.nutrients,n=0;n<_.plotRowsPerTile;n++)for(var r=0;r<_.plotColsPerTile;r++){var s=this.plots[n][r];if(s.crop){var a=e[s.crop];a||(a={crop:0,seed:0},e[s.crop]=a);var o=s.getOptimalYield(i,t),l=o.crop,c=o.seed;a.crop+=l,a.seed+=c}}return e}},{key:"inspectReport",value:function(t){return{x:this.x,y:this.y,nutrients:this.nutrients,seeds:this.seedUsed,yield:this.getOptimalYield(t)}}},{key:"debugLog",value:function(t){console.log("==============INSPECT=TILE!==============");for(var e=0;e<_.plotRowsPerTile;e++)for(var i=0;i<_.plotColsPerTile;i++){var n=this.plots[e][i];n.crop&&n.debugLog(this.nutrients,t)}console.log("-----------------OVERALL-----------------"),console.log(this.inspectReport(t))}}]),t}(),Z=function(){function t(e,i,n){Object(M["a"])(this,t),Object(K["a"])(this,"tiles",null),this.width=e,this.height=i,this.season=n,this.tiles=new Array(i);for(var r=0;r<i;r++){this.tiles[r]=new Array(e);for(var s=0;s<e;s++)this.tiles[r][s]=new V(s,r)}}return Object(G["a"])(t,[{key:"getTile",value:function(t,e){return this.tiles[e][t]}},{key:"tileList",get:function(){return this.tiles.reduce((function(t,e){return t.concat(e)}))}},{key:"toJSON",value:function(){for(var t={},e=0;e<this.height;e++)for(var i=0;i<this.width;i++)this.tiles[e][i].plotted&&(t["".concat(i,",").concat(e)]=this.tiles[e][i].toJSON());return{width:this.width,height:this.height,season:this.season,tiles:t}}},{key:"seedUsed",get:function(){for(var t={},e=0;e<this.height;e++)for(var i=0;i<this.width;i++){var n=this.tiles[e][i];if(n.plotted){var r=n.seedUsed;for(var s in r)t[s]=(t[s]||0)+r[s]}}return t}},{key:"optimalYield",get:function(){for(var t={},e=0;e<this.height;e++)for(var i=0;i<this.width;i++){var n=this.tiles[e][i];if(n.plotted){var r=n.getOptimalYield(this.season);for(var s in r){var a=t[s];a||(a={crop:0,seed:0},t[s]=a),a.crop+=r[s].crop,a.seed+=r[s].seed}}}return t}},{key:"inspectReport",value:function(){return{seeds:this.seedUsed,yield:this.optimalYield}}},{key:"debugLog",value:function(){console.log("==============INSPECT=FARM!==============");for(var t=0;t<this.height;t++)for(var e=0;e<this.width;e++){var i=this.tiles[t][e];i.plotted&&i.debugLog(this.season)}console.log("-----------------OVERALL-----------------"),console.log(this.inspectReport())}}]),t}(),Q=_.plotColsPerTile*_.plotSizePx,tt=_.plotRowsPerTile*_.plotSizePx,et={name:"FieldCanvas",props:["currentAction","currentSeason","actionDetails","fieldState"],components:{Tile:J},data:function(){return{width:this.fieldState.width,height:this.fieldState.height,loaded:!1,farmData:new Z(this.fieldState.width,this.fieldState.height,this.currentSeason)}},mounted:function(){this.loadFieldState()},methods:{updateAdjacentTiles:function(t){var e,i=t.coordinates,n=t.tile,r=t.tileData,s=t.from,a=t.to,o=Object(h["a"])(this.$refs.tiles);try{for(o.s();!(e=o.n()).done;){var l=e.value;n!==l.tileIndex&&Math.abs(l.tileData.x-r.x)<=1&&Math.abs(l.tileData.y-r.y)<=1&&l.updateCropNeighbors(i,s,a)}}catch(c){o.e(c)}finally{o.f()}},toJSON:function(){return this.farmData.toJSON()},loadFieldState:function(){if(!this.loaded){this.loaded=!0;var t,e=Object(h["a"])(this.$refs.tiles);try{for(e.s();!(t=e.n()).done;){var i=t.value,n="".concat(i.tileData.x,",").concat(i.tileData.y);this.fieldState.tiles[n]&&(i.plow(),i.loadTileState(this.fieldState.tiles[n]))}}catch(r){e.e(r)}finally{e.f()}}},inspect:function(t){var e=t.plotDetail,i=t.tileDetail;this.$emit("inspect",{plotDetail:e,tileDetail:i})},actionDone:function(t){this.$emit("action",t)}},computed:{fieldCanvasStyle:function(){var t=E(D[this.currentSeason].turf);return{backgroundImage:"url(".concat(t,")"),height:"".concat(tt*this.height+80,"px"),width:"".concat(Q*this.width+80,"px")}},tileGridStyle:function(){var t="".concat(tt,"px ").repeat(this.height).trim(),e="".concat(Q,"px ").repeat(this.width).trim();return{gridTemplateRows:t,gridTemplateColumns:e}}}},it=et,nt=(i("8e43"),Object(u["a"])(it,m,f,!1,null,"387f9e58",null)),rt=nt.exports,st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column-flex",attrs:{id:"status-bar"}},[i("div",{staticClass:"section-header padding",attrs:{id:"farm-title"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.farmName,expression:"farmName"}],attrs:{id:"farm-title-input",type:"text",maxlength:"32",placeholder:"Name Your Farm Here!"},domProps:{value:t.farmName},on:{input:function(e){e.target.composing||(t.farmName=e.target.value)}}})]),i("div",{attrs:{id:"season-select"}},[i("div",{attrs:{id:"season-selector-label"}},[t._v(" Season ")]),i("div",t._l(t.seasons,(function(e,n){return i("SeasonSwitch",{key:n,attrs:{config:e,selected:t.isSeasonSelected(e)},on:{clicked:t.seasonClicked}})})),1)]),i("hr",{staticClass:"section-divider"}),"inspect"===this.currentAction?i("div",{staticClass:"status-bar-width column-flex remaining-height"},[i("Inspector",{attrs:{farmDetail:t.farmDetail,tileDetail:t.tileDetail,plotDetail:t.plotDetail,season:t.currentSeason}})],1):t._e(),i("div",{staticClass:"status-bar-width column-flex remaining-height",class:t.showOnAction("plant")},[i("CropSelector",{attrs:{currentAction:t.currentAction,actionDetails:t.actionDetails},on:{setActionDetails:t.setActionDetails}})],1),i("div",{staticClass:"status-bar-width column-flex remaining-height",class:t.showOnAction("export")},[i("Exporter",{ref:"exporter",attrs:{fieldState:t.fieldState,currentSeason:t.currentSeason,farmName:t.farmName}})],1),"import"===this.currentAction?i("div",{staticClass:"status-bar-width column-flex remaining-height"},[i("Importer",{attrs:{fieldState:t.fieldState,currentSeason:t.currentSeason,farmName:t.farmName},on:{loadSave:t.emitLoadSave}})],1):t._e()])},at=[],ot=(i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("img",{staticClass:"season-switch brown-icon",class:{"selected-season":this.selected},attrs:{src:t.imgSrc},on:{click:t.triggerEvent}})}),lt=[],ct={name:"SeasonSwitch",props:["config","selected"],data:function(){return{imgSrc:E(this.config.symbol)}},methods:{triggerEvent:function(){this.$emit("clicked",this.config.season)}}},ut=ct,dt=(i("c7ef"),Object(u["a"])(ut,ot,lt,!1,null,"5d11e479",null)),pt=dt.exports,mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column-flex remaining-height",attrs:{id:"crop-selector"}},[i("div",{staticClass:"section-header"},[t._v(" Plant Crops ")]),i("div",{attrs:{id:"crop-filters"}},[i("div",{attrs:{id:"crop-nutrient-filters"}},t._l(t.nutrients,(function(e,n){return i("NutrientFilter",{key:n,attrs:{config:e},on:{click:t.setNutrientFilter}})})),1),i("div",{attrs:{id:"crop-season-filters"}},t._l(t.seasons,(function(e,n){return i("SeasonFilter",{key:n,attrs:{config:e},on:{click:t.seasonClicked}})})),1)]),i("div",{staticClass:"column-flex remaining-height",attrs:{id:"crop-list"}},t._l(t.crops,(function(e,n){return i("CropRow",{key:n,attrs:{selected:t.isCropSelected(e.crop),config:e},on:{click:t.cropClicked}})})),1)])},ft=[],ht=(i("4de4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"crop-row",class:{"selected-crop":t.selected},on:{click:t.triggerEvent}},[i("div",{staticClass:"crop-row-layout"},[i("div",{staticClass:"crop-header"},[i("img",{staticClass:"crop-image",attrs:{src:t.imgSrc}}),i("img",{staticClass:"crop-image",attrs:{src:t.seedImgSrc}}),i("div",{staticClass:"crop-name"},[t._v(" "+t._s(t.config.name)+" ")])]),i("div",{staticClass:"crop-nutrients"},t._l(t.nutrients,(function(e,n){return i("div",{key:n},[i("img",{staticClass:"brown-icon",attrs:{src:t.getResourcePath(e.imgSrc)}}),t._v(" : "+t._s(t.config.nutrients[n])+" ")])})),0),i("div",{staticClass:"crop-seasons"},t._l(t.seasons,(function(e,n){return i("img",{key:n,staticClass:"brown-icon",attrs:{src:t.getResourcePath(e.symbol)}})})),0)])])}),gt=[],vt=(i("d81d"),{growthFormula:{nutrient:"growthFormula",imgSrc:"nutrients/growth_formula_symbol.png"},compost:{nutrient:"compost",imgSrc:"nutrients/compost_symbol.png"},manure:{nutrient:"manure",imgSrc:"nutrients/manure_symbol.png"}}),St={name:"CropRow",props:["config","selected"],data:function(){return{imgSrc:E(this.config.src.normal),seedImgSrc:E(this.config.src.seeds),seasons:this.config.seasons.map((function(t){return D[t]})),nutrients:vt}},methods:{getResourcePath:E,triggerEvent:function(){this.$emit("click",this.selected?null:this.config.crop)}}},yt=St,bt=(i("d723"),Object(u["a"])(yt,ht,gt,!1,null,"65a08376",null)),_t=bt.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"season-filter filter",class:{"selected-filter":t.filter},on:{click:t.triggerEvent}},[i("img",{staticClass:"filter brown-icon",attrs:{src:t.imgSrc}})])},Dt=[],Ct={name:"SeasonFilter",props:["config"],data:function(){return{imgSrc:E(this.config.symbol),filter:!1}},methods:{triggerEvent:function(){this.filter=!this.filter,this.$emit("click",{season:this.config.season,filter:this.filter})}}},wt=Ct,kt=(i("b428"),Object(u["a"])(wt,xt,Dt,!1,null,"0795414e",null)),Ot=kt.exports,Ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nutrient-filter filter",class:t.selectedFilter,on:{click:function(e){return t.toggleNutrientFilter()}}},[i("img",{staticClass:"label brown-icon",attrs:{src:t.getResourcePath(t.config.imgSrc)}}),i("img",{staticClass:"filter brown-icon",attrs:{src:t.getResourcePath(t.intakeSrc)}})])},Tt=[],Pt={name:"NutrientFilter",props:["config"],data:function(){return{filter:null}},methods:{getResourcePath:E,toggleNutrientFilter:function(){null===this.filter?this.filter="+":"+"===this.filter?this.filter="-":this.filter=null,this.$emit("click",{nutrient:this.config.nutrient,filter:this.filter})}},computed:{selectedFilter:function(){return{"selected-filter":null!==this.filter}},intakeSrc:function(){switch(this.filter){case"+":return"nutrients/nutrient-one-down.png";case"-":return"nutrients/nutrient-one-up.png";default:return"nutrients/nutrient-neutral.png"}}}},At=Pt,Nt=(i("2df6"),Object(u["a"])(At,Ft,Tt,!1,null,"3f704d19",null)),jt=Nt.exports,Et={name:"CropSelector",props:["currentAction","actionDetails"],components:{NutrientFilter:jt,SeasonFilter:Ot,CropRow:_t},data:function(){return{filters:{seasons:{},nutrients:{}},nutrients:vt,seasons:D,crops:b}},methods:{cropClicked:function(t){this.actionDetails!==t&&this.$emit("setActionDetails",t)},setNutrientFilter:function(t){var e=t.nutrient,i=t.filter;this.filters.nutrients[e]=i,this.crops=this.filterCrops()},isSeasonSelected:function(t){return!!this.filters.seasons[t]},seasonClicked:function(t){var e=t.season,i=t.filter;this.filters.seasons[e]=i,this.crops=this.filterCrops()},isCropSelected:function(t){return this.actionDetails===t},filterCrops:function(){var t={};for(var e in b){var i=b[e],n=!0;for(var r in this.filters.seasons){var s=!!this.filters.seasons[r];if(s&&!i.seasons.includes(r)){n=!1;break}}for(var a in this.filters.nutrients){var o=this.filters.nutrients[a],l="+"===o&&i.nutrients[a]<0,c="-"===o&&i.nutrients[a]>0;if(l||c){n=!1;break}}n&&(t[e]=i)}return t}}},$t=Et,It=(i("12e3"),Object(u["a"])($t,mt,ft,!1,null,null,null)),Rt=It.exports,Lt=function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"column-flex remaining-height",attrs:{id:"inspector"}},[n("div",{staticClass:"section-header"},[e._v(" Inspect Farm ")]),n("div",{attrs:{id:"inspect-farm"}},[n("div",{staticClass:"subsection-header"},[e._v(" Farm Stats ")]),n("div",{staticClass:"detail-label"},[e._v(" Total Seeds Needed: ")]),e.nonEmptyObject(e.farmDetail.seeds)?n("SeedList",{attrs:{seeds:e.farmDetail.seeds}}):n("div",{staticClass:"no-data"},[e._v("none")]),n("div",{staticClass:"detail-label"},[e._v(" Total Farm Yield: ")]),e.nonEmptyObject(e.farmDetail.yield)?n("YieldList",{attrs:{yields:e.farmDetail.yield}}):n("div",{staticClass:"no-data"},[e._v("none")])],1),e.tileDetail?n("hr",{staticClass:"section-divider"}):e._e(),e.tileDetail?n("div",{attrs:{id:"inspect-tile"}},[n("div",{staticClass:"subsection-header"},[e._v(" Tile Stats ")]),n("div",{staticClass:"detail-label"},[e._v(" Ground Nutrient: ")]),n("NutrientList",{attrs:{nutrients:e.tileDetail.nutrients}}),n("div",{staticClass:"detail-label"},[e._v(" Seeds Needed: ")]),e.nonEmptyObject(e.tileDetail.seeds)?n("SeedList",{attrs:{seeds:e.tileDetail.seeds}}):n("div",{staticClass:"no-data"},[e._v("none")]),n("div",{staticClass:"detail-label"},[e._v(" Tile Yield: ")]),e.nonEmptyObject(e.tileDetail.yield)?n("YieldList",{attrs:{yields:e.tileDetail.yield}}):n("div",{staticClass:"no-data"},[e._v("none")])],1):e._e(),e.plotDetail?n("hr",{staticClass:"section-divider"}):e._e(),e.plotDetail?n("div",{attrs:{id:"inspect-plot"}},[n("div",{staticClass:"subsection-header"},[e._v(" Plot Status ")]),n("div",{staticClass:"detail-label"},[e._v(" Crop Planted: "),n("img",{attrs:{src:e.getCropImgSrc(e.plotDetail.crop,"normal")}}),n("img",{staticStyle:{"margin-left":"-10px"},attrs:{src:e.getCropImgSrc(e.plotDetail.crop,"seeds")}}),e._v(" "+e._s(e.getCropName(e.plotDetail.crop))+" ")]),n("div",{staticClass:"detail-label"},[e._v(" Nutrient Requirements: ")]),n("NutrientList",{attrs:{nutrients:e.plotDetail.nutrientRequirements}}),n("div",{staticClass:"detail-label"},[e._v(" Crop Yield: ")]),n("YieldList",{attrs:{yields:(t={},t[e.plotDetail.crop]=e.plotDetail.yield,t)}}),n("div",{staticClass:"detail-label"},[e._v(" Stress Factors: ")]),n("ul",{staticClass:"stress-factors"},[e.cropInSeason?n("li",[e._v(" Favors the current season ")]):n("li",{staticClass:"stress-fail"},[e._v(" Out of season (this crop favors the seasons: "+e._s(e.cropFavoredSeasons.join(", "))+") ")]),e.cropHasFamily?n("li",[e._v(" Has enough nearby family ")]):n("li",{staticClass:"stress-fail"},[e._v(" Does not have enough nearby family (needs "+e._s(e.requiredFamily-e.plotDetail.family)+" more nearby family) ")]),e.cropMeetsNutrients?n("li",[e._v(" Meets all required ground nutrients ")]):n("li",{staticClass:"stress-fail"},[e._v(" Does not meet all required ground nutrients (check the ground nutrients of the tile) ")])])],1):e._e()])},Yt=[],zt=(i("b64b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nutrient-list"},t._l(t.nutrients,(function(e,n){return i("div",{key:n,staticClass:"nutrient-count"},[i("img",{staticClass:"brown-icon",attrs:{src:t.imgSrc(n)}}),t._v(" : "+t._s(e)+" ")])})),0)}),Bt=[],Ut={name:"NutrientList",props:["nutrients"],data:function(){return{}},methods:{imgSrc:function(t){return E(vt[t].imgSrc)}}},Wt=Ut,Ht=(i("66ab"),Object(u["a"])(Wt,zt,Bt,!1,null,"10a6408d",null)),qt=Ht.exports,Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"yield-list"},t._l(t.yieldList,(function(e,n){return i("div",{key:n,staticClass:"yield-count"},[i("img",{staticClass:"yield-img",attrs:{src:e.imgSrc}}),t._v(" x "+t._s(e.count)+" ")])})),0)},Mt=[],Gt={name:"YieldList",props:["yields"],data:function(){return{}},computed:{yieldList:function(){var t=[];for(var e in this.yields)t.push({imgSrc:E(b[e].src.normal),count:this.yields[e].crop}),t.push({imgSrc:E(b[e].src.seeds),count:this.yields[e].seed});return t}}},Kt=Gt,Xt=(i("769e"),Object(u["a"])(Kt,Jt,Mt,!1,null,"065d7888",null)),Vt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"seed-list"},t._l(t.seeds,(function(e,n){return i("div",{key:n,staticClass:"seed-count"},[i("img",{staticClass:"seed-img",attrs:{src:t.src(n,"seeds")}}),i("img",{staticClass:"crop-img",attrs:{src:t.src(n,"normal")}}),t._v(" x "+t._s(e)+" ")])})),0)},Qt=[],te={name:"SeedList",props:["seeds"],data:function(){return{}},methods:{src:function(t,e){return E(b[t].src[e])}}},ee=te,ie=(i("8fbd"),Object(u["a"])(ee,Zt,Qt,!1,null,"8b4165ea",null)),ne=ie.exports,re={name:"Inspector",props:["farmDetail","tileDetail","plotDetail","season"],components:{NutrientList:qt,YieldList:Vt,SeedList:ne},data:function(){return{}},methods:{nonEmptyObject:function(t){return t&&Object.keys(t).length>0},getCropImgSrc:function(t,e){b[t].src[e];return E(b[t].src[e])},getCropName:function(t){return b[t].name}},computed:{cropInSeason:function(){return this.plotDetail.inSeason},cropHasFamily:function(){return this.plotDetail.hasFamily},cropMeetsNutrients:function(){return this.plotDetail.meetsNutrientRequirements},cropFavoredSeasons:function(){return b[this.plotDetail.crop].seasons},requiredFamily:function(){return _.minimumFamily}}},se=re,ae=(i("cb48"),Object(u["a"])(se,Lt,Yt,!1,null,"1979af2a",null)),oe=ae.exports,le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column-flex remaining-height",attrs:{id:"exporter"}},[i("div",{staticClass:"section-header"},[t._v(" Export ")]),i("div",{attrs:{id:"file-export"}},[i("label",{attrs:{id:"file-export-label"}},[t._v(" Export as JSON File ")]),i("button",{attrs:{type:"button"},on:{click:t.downloadFieldState}},[t._v(" Download ")])]),i("hr",{staticClass:"section-divider"}),i("div",{staticClass:"section-header"},[t._v(" Save in Browser ")]),i("div",{staticClass:"column-flex remaining-height",attrs:{id:"local-save"}},[i("div",{staticClass:"column-flex remaining-height",attrs:{id:"save-slot-list"}},[t._l(t.saveSummaries,(function(e){return i("SaveSlot",{key:e.index,attrs:{selected:t.selectedSlot===e.index,name:e.name,season:e.season,time:e.time,deletable:!0},on:{click:function(i){return t.selectSlot(e.index)},delete:function(i){return t.deleteSave(e)}}})})),i("div",{class:{"selected-slot":"new"===t.selectedSlot},attrs:{id:"new-save-slot"},on:{click:function(e){return t.selectSlot("new")}}},[t._v(" + New Save ")])],2),i("button",{attrs:{disabled:!t.selectedSlot,type:"button"},on:{click:t.saveState}},[t._v(" Save ")])])])},ce=[],ue=(i("2b3d"),i("d3b7"),i("3ca3"),i("ddb0"),i("a434"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"save-slot",class:{"selected-slot":t.selected},on:{click:t.emitClick}},[i("div",{staticClass:"save-details"},[i("img",{staticClass:"save-icon brown-icon",attrs:{src:t.imgSrc}}),i("div",{staticClass:"save-name"},[t._v(t._s(t.name||"Unnamed Save"))])]),i("div",{staticClass:"save-footer"},[i("div",{staticClass:"save-time"},[t._v(t._s(t.timeString))]),t.deletable?i("div",{staticClass:"save-delete",on:{click:function(e){return e.stopPropagation(),t.deleteSave(e)}}},[t._v(" Delete ")]):t._e()])])}),de=[],pe={name:"SaveSlot",props:["selected","name","season","time","deletable"],data:function(){return{}},methods:{emitClick:function(){this.$emit("click")},deleteSave:function(){this.$emit("delete")}},computed:{imgSrc:function(){return E(D[this.season].symbol)},timeString:function(){return new Date(this.time).toLocaleString()}}},me=pe,fe=(i("4a1f"),Object(u["a"])(me,ue,de,!1,null,"830cad3c",null)),he=fe.exports,ge={saveSummary:"saveSummaries",saveData:"saveData"};function ve(t,e){var i=JSON.stringify(e);localStorage.setItem(t,i)}function Se(t,e){var i=localStorage.getItem(t);return i?JSON.parse(i):e}var ye={name:"Exporter",props:["fieldState","currentSeason","farmName"],components:{SaveSlot:he},data:function(){var t=Se(ge.saveSummary,{}),e=t.summaries,i=t.lastIndex;return{selectedSlot:null,saveSummaries:(e||[]).filter((function(t){return t})),lastIndex:i||0}},methods:{downloadFieldState:function(){var t=JSON.stringify(this.fieldState),e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download="".concat(this.farmName,".json"),document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)}),0)},selectSlot:function(t){t!==this.selectedSlot?this.selectedSlot=t:this.selectedSlot=null},storeSummary:function(){var t={name:this.farmName,season:this.currentSeason,index:this.selectedSlot,time:(new Date).getTime()},e=Se(ge.saveSummary,{}),i=e.summaries,n=(i||[]).filter((function(t){return t})),r=!1;for(var s in n)this.selectedSlot===n[s].index&&(n[s]=t,r=!0);r||n.push(t),ve(ge.saveSummary,{summaries:n,lastIndex:this.lastIndex}),this.saveSummaries=n},saveState:function(){"new"===this.selectedSlot&&(this.lastIndex++,this.selectedSlot=this.lastIndex);var t={index:this.selectedSlot,data:this.fieldState},e=Se(ge.saveData,{});e[this.selectedSlot]=t,ve(ge.saveData,e),this.storeSummary()},deleteSave:function(t){var e=t.name,i=t.index;this.selectedSlot===i&&(this.selectedSlot=null);var n=confirm('Are you sure you want to delete your save "'.concat(e,'"?'));if(n){for(var r in this.saveSummaries)if(i===this.saveSummaries[r].index){this.saveSummaries.splice(r,1);break}ve(ge.saveSummary,{summaries:this.saveSummaries,lastIndex:this.lastIndex});var s=Se(ge.saveData,{});delete s[i],ve(ge.saveData,s)}}}},be=ye,_e=(i("e129"),Object(u["a"])(be,le,ce,!1,null,"65d8c202",null)),xe=_e.exports,De=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column-flex remaining-height",attrs:{id:"importer"}},[i("div",{staticClass:"section-header"},[t._v(" Import ")]),i("div",{attrs:{id:"file-import"}},[i("div",{attrs:{id:"file-import-label"}},[t._v(" Import a JSON File ")]),i("label",{attrs:{for:"file-upload",id:"file-import-button"}},[t._v(" Upload ")]),i("input",{attrs:{id:"file-upload",type:"file",accept:"application/JSON"},on:{change:t.uploadFieldState}})]),i("hr",{staticClass:"section-divider"}),i("div",{staticClass:"section-header"},[t._v(" Load from Browser ")]),i("div",{staticClass:"column-flex remaining-height",attrs:{id:"local-load"}},[i("div",{staticClass:"column-flex remaining-height",attrs:{id:"load-slot-list"}},t._l(t.saveSummaries,(function(e){return i("SaveSlot",{key:e.index,attrs:{selected:t.selectedSlot===e.index,name:e.name,season:e.season,time:e.time,deletable:!1},on:{click:function(i){return t.selectSlot(e.index)}}})})),1),i("button",{attrs:{disabled:!t.selectedSlot,type:"button"},on:{click:t.loadSavedState}},[t._v(" Load ")])])])},Ce=[],we=i("3835"),ke={name:"Importer",props:["fieldState","currentSeason","farmName"],components:{SaveSlot:he},data:function(){var t=Se(ge.saveSummary,{}),e=t.summaries;return{selectedSlot:null,saveSummaries:(e||[]).filter((function(t){return t}))}},methods:{uploadFieldState:function(t){var e=this,i=Object(we["a"])(t.target.files,1),n=i[0],r=new FileReader;r.onload=function(){var t,i=r.result;try{if(t=JSON.parse(i),!C(t))throw new Error("Invalid savefile format")}catch(n){return alert("Imported file is invalid"),void console.error(n)}e.loadState(t,null)},n&&r.readAsText(n)},selectSlot:function(t){t!==this.selectedSlot?this.selectedSlot=t:this.selectedSlot=null},fetchSaveSummary:function(){for(var t in this.saveSummaries)if(this.selectedSlot===this.saveSummaries[t].index)return this.saveSummaries[t]},loadSavedState:function(){if(this.selectedSlot){var t=Se(ge.saveData,{}),e=this.fetchSaveSummary();t[this.selectedSlot]&&this.loadState(t[this.selectedSlot].data,e)}},loadState:function(t,e){this.$emit("loadSave",t,e)}}},Oe=ke,Fe=(i("aaf1"),Object(u["a"])(Oe,De,Ce,!1,null,"7bcb95a8",null)),Te=Fe.exports,Pe={name:"StatusBar",components:{SeasonSwitch:pt,CropSelector:Rt,Inspector:oe,Exporter:xe,Importer:Te},props:["currentSeason","currentAction","actionDetails","fieldState","farmDetail","tileDetail","plotDetail"],data:function(){return{seasons:D,farmName:""}},methods:{seasonClicked:function(t){this.$emit("selectSeason",t)},isSeasonSelected:function(t){return t.season===this.currentSeason},actionSelected:function(t){return t===this.currentAction},setActionDetails:function(t){this.$emit("setActionDetails",t)},showOnAction:function(t){return{"hidden-section":this.currentAction!==t}},emitLoadSave:function(t,e){e&&(this.farmName=e.name,this.$refs.exporter.selectedSlot=e.index),this.$emit("loadSave",t)}}},Ae=Pe,Ne=(i("eede"),Object(u["a"])(Ae,st,at,!1,null,null,null)),je=Ne.exports,Ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"tool-bar"}},[t._l(t.tools,(function(e,n){return i("div",{key:n,staticClass:"tool-frame"},[i("Tool",{attrs:{config:e,selected:t.isSelected(e)},on:{clicked:t.toolClicked}})],1)})),i("div",{staticClass:"action-stack-button"},[i("div",{staticClass:"tool-frame",class:{"disable-action":!t.undoable},attrs:{id:"undo-button"}},[i("img",{attrs:{src:t.imgSrc("undo")},on:{click:t.undo}})]),i("div",{staticClass:"tool-frame",class:{"disable-action":!t.redoable},attrs:{id:"redo-button"}},[i("img",{attrs:{src:t.imgSrc("redo")},on:{click:t.redo}})])])],2)},$e=[],Ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("img",{class:{selectedTool:this.selected},attrs:{src:t.imgSrc},on:{click:t.triggerEvent}})},Re=[],Le={name:"Tool",props:["config","selected"],data:function(){return{imgSrc:E(this.config.image)}},methods:{triggerEvent:function(){this.$emit("clicked",this.selected?null:this.config.action)}}},Ye=Le,ze=(i("3d22"),Object(u["a"])(Ye,Ie,Re,!1,null,"6bc69822",null)),Be=ze.exports,Ue=[{action:"inspect",tooltip:"Inspect farm",image:"toolbar/gardeneer_hat.png"},{action:"plant",tooltip:"Plant crops",image:"toolbar/seeds.png"},{action:"destroy",tooltip:"Destroy crops",image:"toolbar/shovel.png"},{action:"plot",tooltip:"Create plots",image:"toolbar/garden_rigamajig.png"},{action:"flatten",tooltip:"Destroy plots",image:"toolbar/pitchfork.png"},{action:"export",tooltip:"Load/export farms",image:"toolbar/bundled_supplies.png"}],We={name:"ToolBar",components:{Tool:Be},props:["currentAction","undoable","redoable"],data:function(){return{tools:Ue}},methods:{toolClicked:function(t){this.$emit("selectAction",t)},isSelected:function(t){return t.action===this.currentAction},imgSrc:function(t){return E("toolbar/".concat(t,".png"))},undo:function(){this.undoable&&this.$emit("undo")},redo:function(){this.redoable&&this.$emit("redo")}}},He=We,qe=(i("dad1"),Object(u["a"])(He,Ee,$e,!1,null,"edf3ecb4",null)),Je=qe.exports,Me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.seasonalBgImage,attrs:{id:"startup"}},[i("div",{attrs:{id:"startup-box"}},[i("h2",[t._v("Create your farm!")]),i("div",{attrs:{id:"create-farm-form"}},[i("div",{staticClass:"dim-field",attrs:{id:"width-field"}},[i("label",{staticClass:"dim-field-label"},[t._v("Columns:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputWidth,expression:"inputWidth"}],ref:"widthForm",staticClass:"dim-field-input",attrs:{required:"",type:"number",step:"1",min:t.minSize,max:t.maxSize},domProps:{value:t.inputWidth},on:{input:function(e){e.target.composing||(t.inputWidth=e.target.value)}}}),t.inputWidthError?i("p",{staticClass:"dim-field-error"},[t._v(" "+t._s(t.inputWidthError)+" ")]):t._e()]),i("div",{staticClass:"dim-field",attrs:{id:"height-field"}},[i("label",{staticClass:"dim-field-label"},[t._v("Rows:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputHeight,expression:"inputHeight"}],ref:"heightForm",staticClass:"dim-field-input",attrs:{required:"",type:"number",step:"1",min:t.minSize,max:t.maxSize},domProps:{value:t.inputHeight},on:{input:function(e){e.target.composing||(t.inputHeight=e.target.value)}}}),t.inputHeightError?i("p",{staticClass:"dim-field-error"},[t._v(" "+t._s(t.inputHeightError)+" ")]):t._e()]),i("button",{attrs:{id:"dim-submit",type:"button"},on:{click:t.submitSize}},[t._v(" START ")])])])])},Ge=[],Ke={name:"Startup",props:["width","height","season"],data:function(){var t=_.minFarmSize,e=_.maxFarmSize;return{tiles:{},inputWidth:"".concat(_.defaultTileCols),inputHeight:"".concat(_.defaultTileRows),inputWidthError:null,inputHeightError:null,minSize:t,maxSize:e}},methods:{submitSize:function(){if(this.inputWidthError=null,this.inputHeightError=null,this.inputWidthError=this.getDimensionInputError(+this.inputWidth),this.inputHeightError=this.getDimensionInputError(+this.inputHeight),!this.inputWidthError&&!this.inputHeightError){var t={width:+this.inputWidth,height:+this.inputHeight,season:this.season,tiles:{}};this.$emit("finishSetup",t)}},getDimensionInputError:function(t){var e=null;return O(t)?T(t,this.minSize,this.maxSize)||(e="Must be between ".concat(this.minSize," and ").concat(this.maxSize)):e="Must be an integer",e}},computed:{seasonalBgImage:function(){var t=E(D[this.season].turf);return{backgroundImage:"url(".concat(t,")"),backgroundSize:"768px",backgroundRepeat:"repeat",transition:"background-image 0.5s ease-in-out"}}}},Xe=Ke,Ve=(i("f0dc"),Object(u["a"])(Xe,Me,Ge,!1,null,"089c327e",null)),Ze=Ve.exports,Qe={Digit1:"inspect",Digit2:"plant",Digit3:"destroy",Digit4:"plot",Digit5:"flatten",Digit6:"export"},ti={name:"App",components:{NavigationBar:p,FieldCanvas:rt,StatusBar:je,ToolBar:Je,Startup:Ze},data:function(){return{currentAction:"import",currentActionDetail:null,currentSeason:_.defaultSeason,fieldState:null,actionDetails:{},farmDetail:null,tileDetail:null,plotDetail:null,undoStack:[],redoStack:[]}},mounted:function(){var t=this;window.debugFarm=function(){t.$refs.field.farmData.debugLog()},window.debugTile=function(e,i){t.$refs.field.farmData.getTile(e,i).debugLog(t.currentSeason)},document.addEventListener("keydown",(function(e){return t.keydown(e)}))},methods:{setAction:function(t){this.currentAction=t,this.currentActionDetail=this.actionDetails[this.currentAction]||null,"export"===t?this.fieldState=this.$refs.field.toJSON():"inspect"===t&&(this.farmDetail=this.$refs.field.farmData.inspectReport(),this.tileDetail=null,this.plotDetail=null)},setSeasonUndoable:function(t){var e=this,i=this.currentSeason;return this.currentSeason=t,this.fieldState&&(this.$refs.field.farmData.season=t,this.fieldState=this.$refs.field.toJSON()),"inspect"===this.currentAction&&(this.farmDetail=this.$refs.field.farmData.inspectReport()),{type:"setSeasonUndoable",revert:function(){return e.setSeasonUndoable(i)}}},setSeason:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.setSeasonUndoable(t);e||this.actionDone(i)},setActionDetails:function(t){this.actionDetails[this.currentAction]=t,this.currentActionDetail=t},loadSave:function(t){this.undoStack=[],this.redoStack=[],this.setupFarm(t)},setupFarm:function(t){this.currentAction=null,this.currentActionDetail=null,this.fieldState=t,this.currentSeason=t.season,this.width=t.width,this.height=t.height},inspect:function(t){var e=t.tileDetail,i=t.plotDetail;this.tileDetail=e,this.plotDetail=i},actionDone:function(t){this.undoStack.push(t),this.redoStack=[]},keydown:function(t){if("INPUT"!==document.activeElement.tagName){if(t.ctrlKey&&t.shiftKey&&"KeyZ"===t.code||t.ctrlKey&&"KeyY"===t.code)return this.redo(),void t.preventDefault();if(t.ctrlKey&&"KeyZ"===t.code)return this.undo(),void t.preventDefault();if(!t.ctrlKey&&!t.shiftKey&&this.fieldState){var e=Qe[t.code];e&&(this.setAction(e),t.preventDefault())}}},undo:function(){if(0!==this.undoStack.length){var t=this.undoStack.pop();if(t&&t.revert){var e=t.revert();this.redoStack.push(e)}}},redo:function(){if(0!==this.redoStack.length){var t=this.redoStack.pop();if(t&&t.revert){var e=t.revert();this.undoStack.push(e)}}}},computed:{undoable:function(){return this.undoStack.length>0},redoable:function(){return this.redoStack.length>0}}},ei=ti,ii=(i("034f"),Object(u["a"])(ei,r,s,!1,null,null,null)),ni=ii.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(ni)}}).$mount("#app")},"58b8":function(t,e,i){},"66ab":function(t,e,i){"use strict";i("e8ef")},"769e":function(t,e,i){"use strict";i("8b66")},7949:function(t,e,i){},"844f":function(t,e,i){},"85ec":function(t,e,i){},"8b66":function(t,e,i){},"8d1f":function(t,e,i){},"8e43":function(t,e,i){"use strict";i("1dfb")},"8fbd":function(t,e,i){"use strict";i("58b8")},aaa5:function(t,e,i){},aaf1:function(t,e,i){"use strict";i("d032")},b428:function(t,e,i){"use strict";i("844f")},b851:function(t,e,i){},c00d:function(t,e,i){},c162:function(t,e,i){"use strict";i("25e8")},c7ef:function(t,e,i){"use strict";i("5238")},cb48:function(t,e,i){"use strict";i("1a92")},d032:function(t,e,i){},d723:function(t,e,i){"use strict";i("06a3")},d845:function(t,e,i){"use strict";i("8d1f")},dad1:function(t,e,i){"use strict";i("c00d")},e129:function(t,e,i){"use strict";i("ed26")},e8ef:function(t,e,i){},ed26:function(t,e,i){},eede:function(t,e,i){"use strict";i("7949")},f0dc:function(t,e,i){"use strict";i("0d37")}});
//# sourceMappingURL=index.eec44bcc.js.map